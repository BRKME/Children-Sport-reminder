#!/usr/bin/env python3
"""
Kids Schedule Notifier with Parenting Tips
Sends daily schedule for Marta and Arkasha via Telegram
"""

import asyncio
import aiohttp
from datetime import datetime
import locale
import random

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä—É—Å—Å–∫—É—é –ª–æ–∫–∞–ª—å –¥–ª—è –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏
try:
    locale.setlocale(locale.LC_TIME, 'ru_RU.UTF-8')
except:
    try:
        locale.setlocale(locale.LC_TIME, 'Russian_Russia.1251')
    except:
        pass

class KidsScheduleNotifier:
    def __init__(self):
        # Telegram settings
        self.telegram_token = "8442392037:AAEiM_b4QfdFLqbmmc1PXNvA99yxmFVLEp8"
        self.chat_id = "350766421"
        
        # Schedule data
        self.schedule = {
            '–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫': [
                {'child': 'üëß –ú–∞—Ä—Ç–∞', 'activity': 'üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–∏–π', 'time': '16:00-17:00'},
                {'child': 'üë¶ –ê—Ä–∫–∞—à–∞', 'activity': 'üìê –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', 'time': '19:00-20:00'}
            ],
            '–≤—Ç–æ—Ä–Ω–∏–∫': [
                {'child': 'üëß –ú–∞—Ä—Ç–∞', 'activity': 'üíÉ –¢–∞–Ω—Ü—ã', 'time': '17:30-19:00'},
                {'child': 'üë¶ –ê—Ä–∫–∞—à–∞', 'activity': '‚öΩ –§—É—Ç–±–æ–ª', 'time': '17:00-18:00'}
            ],
            '—Å—Ä–µ–¥–∞': [
                {'child': 'üëß –ú–∞—Ä—Ç–∞', 'activity': 'ü§∫ –§–µ—Ö—Ç–æ–≤–∞–Ω–∏–µ', 'time': '15:00-16:30'},
                {'child': 'üëß –ú–∞—Ä—Ç–∞', 'activity': 'üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–∏–π', 'time': '17:00-18:00'}
            ],
            '—á–µ—Ç–≤–µ—Ä–≥': [
                {'child': 'üëß –ú–∞—Ä—Ç–∞', 'activity': 'üíÉ –¢–∞–Ω—Ü—ã', 'time': '17:30-19:00'},
                {'child': 'üë¶ –ê—Ä–∫–∞—à–∞', 'activity': '‚öΩ –§—É—Ç–±–æ–ª', 'time': '17:00-18:00'}
            ],
            '–ø—è—Ç–Ω–∏—Ü–∞': [
                {'child': 'üëß –ú–∞—Ä—Ç–∞', 'activity': 'ü§∫ –§–µ—Ö—Ç–æ–≤–∞–Ω–∏–µ', 'time': '15:00-16:30'},
                {'child': 'üë¶ –ê—Ä–∫–∞—à–∞', 'activity': 'üìê –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', 'time': '19:00-20:00'}
            ],
            '—Å—É–±–±–æ—Ç–∞': [
                {'child': 'üëß –ú–∞—Ä—Ç–∞', 'activity': 'ü§∫ –§–µ—Ö—Ç–æ–≤–∞–Ω–∏–µ', 'time': '15:00-17:00'}
            ],
            '–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ': [
                {'child': 'üëß –ú–∞—Ä—Ç–∞', 'activity': 'ü§∫ –§–µ—Ö—Ç–æ–≤–∞–Ω–∏–µ', 'time': '12:00-14:00'}
            ]
        }
        
       # Marta tips (9 –ª–µ—Ç)
self.marta_tips = [
    "–ü–æ–∫–∞–∂–∏, —á—Ç–æ –≤—Å–µ–≥–¥–∞ –∑–∞ –Ω–µ—ë, —Å–ª—É—à–∞–π –±–µ–∑ –ª–µ–∫—Ü–∏–π –∏ —Ä–∞–∑–±–∏—Ä–∞–π —Å–∏—Ç—É–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–µ.",
    "–°—Å–æ—Ä—ã —Å –±—Ä–∞—Ç–æ–º –∏–ª–∏ —Å–µ—Å—Ç—Ä–æ–π. –ü—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—Ç, –¥—Ä–∞–∑–Ω–∏—Ç, —Å–ø–æ—Ä–∏—Ç ¬´–±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã¬ª. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ: ¬´–ú–Ω–µ –±–æ–ª—å–Ω–æ. –Ø –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –æ–± —ç—Ç–æ–º —Å–∫–∞–∑–∞—Ç—å¬ª. –ê–≥—Ä–µ—Å—Å–∏—è —á–∞—Å—Ç–æ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞.",
    "–ù–µ —á–∏—Ç–∞–π –º–æ—Ä–∞–ª–∏ ('—è –∂–µ –≥–æ–≤–æ—Ä–∏–ª') –∏ –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π —É—Å–ø–µ—Ö–∏ ‚Äî –æ—Ç–º–µ—á–∞–π –¥–∞–∂–µ –º–µ–ª–æ—á–∏.",
    "–°–ª—É—à–∞–π –±–µ–∑ –æ—Å—É–∂–¥–µ–Ω–∏—è ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∏—Ç —Å–≤—è–∑—å. –ù–µ –∑–∞–∫—Ä—ã–≤–∞–π —Ç–µ–º—ã —Ç–µ–ª–∞ –∏ –≤–∑—Ä–æ—Å–ª–µ–Ω–∏—è.",
    "–í 9 –ª–µ—Ç –¥–µ–≤–æ—á–∫–∞ –Ω–µ ¬´—Ö–∞–ª—è–≤–Ω–∞—è¬ª, –∞ –ø—Ä–æ—Å—Ç–æ –º–æ–∑–≥ –µ—â—ë —É—á–∏—Ç—Å—è —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—é –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é. –ó–∞–¥–∞—á–∞ –≤–∑—Ä–æ—Å–ª—ã—Ö ‚Äî –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å, –¥–∞–≤–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∏–≥—Ä—É –∏ –ø–æ—Ö–≤–∞–ª—É, –∞ –Ω–µ —á–µ—Ä–µ–∑ –æ–±–≤–∏–Ω–µ–Ω–∏—è.",
    "–û—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–µ. –ù–µ —Ö–æ—á–µ—Ç —á–∏—Å—Ç–∏—Ç—å –∑—É–±—ã, –æ–¥–µ–≤–∞—Ç—å—Å—è, —É–±–∏—Ä–∞—Ç—å. –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: ¬´–Ø –≤—ã–º–æ—Ç–∞–Ω. –£ –º–µ–Ω—è –Ω–µ—Ç —Ä–µ—Å—É—Ä—Å–∞ –Ω–∏ –Ω–∞ —á—Ç–æ¬ª. –î–µ—Ç—è–º —Ç–æ–∂–µ –Ω—É–∂–Ω–∞ –ø–∞—É–∑–∞ ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ –≤–∑—Ä–æ—Å–ª—ã–º.",
    "–î–∞–π –∑–æ–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (–∫–∞—Ä–º–∞–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏, –≤—ã–±–æ—Ä –æ–¥–µ–∂–¥—ã), –Ω–æ –Ω–µ –≥—Ä—É–∑–∏ –≤–∑—Ä–æ—Å–ª—ã–º.",
    "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç '–º–Ω–µ —Å–∫—É—á–Ω–æ'. –ñ–∞–ª—É–µ—Ç—Å—è, —Ö–æ–¥–∏—Ç –∑–∞ –≤–∞–º–∏, —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ. –ò—Å—Ç–∏–Ω–Ω—ã–π —Å–º—ã—Å–ª: ¬´–ú–Ω–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å–≤—è–∑–∏. –û–±–Ω–∏–º–∏ –º–µ–Ω—è¬ª. –ò–º —Å–∫—É—á–Ω–æ –Ω–µ –æ—Ç –±–µ–∑–¥–µ–ª—å—è, –∞ –æ—Ç –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞.",
    "–•–≤–∞–ª–∏ –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å ('—Ç—ã —Å—Ç–∞—Ä–∞–ª–∞—Å—å'), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.",
    "–ò–Ω—Ç–µ—Ä–µ—Å—É–π—Å—è —Ç–∞–Ω—Ü–∞–º–∏, –∫–Ω–∏–≥–∞–º–∏, —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π –º–Ω–µ–Ω–∏–µ, –ø–æ–¥–∫–∏–¥—ã–≤–∞–π —Ä–µ—Å—É—Ä—Å—ã.",
    "–ü–æ–º–æ–≥–∞–π –Ω–∞–π—Ç–∏ —Å–≤–æ–π —Å—Ç–∏–ª—å —É—á—ë–±—ã, —Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ü–µ–Ω–∫–∞—Ö.",
    "–°–ª–µ–¥–∏ –∑–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º –ø–æ–¥—Ä—É–∂–µ–∫ ‚Äî –¥–ª—è –Ω–µ—ë —ç—Ç–æ –∫–∞–∫ –≤—Å–µ–ª–µ–Ω–Ω–∞—è.",
    "–ü–æ–æ—â—Ä—è–π —Å–ø–æ—Ä—Ç, –¥–≤–∏–∂–µ–Ω–∏–µ, –∏–≥—Ä—ã ‚Äî –º–æ–∑–≥ –∏ —Ç–µ–ª–æ —Å–≤—è–∑–∞–Ω—ã.",
    "–®—É—Ç–∏—Ç–µ –≤–º–µ—Å—Ç–µ, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–µ–º–µ–π–Ω—ã–µ –º–µ–º—ã ‚Äî —ç—Ç–æ —É–∫—Ä–µ–ø–ª—è–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è.",
    "–ù–∞—É—á–∏ —Ä–µ—à–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å–æ —Å–≤–µ—Ä—Å—Ç–Ω–∏—Ü–∞–º–∏ ‚Äî –ø–æ–º–æ–≥–∞–π –≤–∏–¥–µ—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è.",
    "–ù–µ —Å—Ä–∞–≤–Ω–∏–≤–∞–π –µ—ë —Å –¥—Ä—É–≥–∏–º–∏ –¥–µ—Ç—å–º–∏ ‚Äî –∫–∞–∂–¥–∞—è —É–Ω–∏–∫–∞–ª—å–Ω–∞ –≤ —Å–≤–æ—ë–º —Ä–∞–∑–≤–∏—Ç–∏–∏.",
    "–£—Å—Ç–∞–Ω–æ–≤–∏ –∑–¥–æ—Ä–æ–≤—ã–π —Ä–µ–∂–∏–º —Å–Ω–∞ (9 —á–∞—Å–æ–≤ –≤ –Ω–æ—á—å) ‚Äî —É—Å—Ç–∞–ª–æ—Å—Ç—å –≤–ª–∏—è–µ—Ç –Ω–∞ —ç–º–æ—Ü–∏–∏.",
    "–ì–æ–≤–æ—Ä–∏ –æ —á—É–≤—Å—Ç–≤–∞—Ö: '—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∑–ª–∏—Ç—å—Å—è, –≥—Ä—É—Å—Ç–∏—Ç—å, –±–æ—è—Ç—å—Å—è' ‚Äî –Ω–∞–∑–æ–≤–∏ —ç–º–æ—Ü–∏–∏.",
    "–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π —ç–∫—Ä–∞–Ω—ã –ø–µ—Ä–µ–¥ —Å–Ω–æ–º ‚Äî —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç —Å–æ —Å–Ω–æ–º –∏ —Ñ–æ–∫—É—Å–æ–º.",
    "–°–æ–∑–¥–∞–≤–∞–π —Å–µ–º–µ–π–Ω—ã–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏ (—Å–µ–º–µ–π–Ω—ã–π —É–∂–∏–Ω, –≤—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å) ‚Äî —ç—Ç–æ —è–∫–æ—Ä—è."
]

        
        # Arkasha tips (13 –ª–µ—Ç)
        self.arkasha_tips = [
            "–°–æ—Ö—Ä–∞–Ω–∏ –¥–æ–≤–µ—Ä–∏–µ –≤ –ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–∏–æ–¥ ‚Äî –±—É–¥—å –≥–µ—Ä–æ–µ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–Ω–∏–º–∞–µ—Ç, –∞ –Ω–µ —Å—É–¥–∏—Ç.",
            "–ì–∏–ø–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ —Å–Ω–æ–º. –ë–µ–≥–∞–µ—Ç, —à—É–º–∏—Ç, –¥—É—Ä–∞—á–∏—Ç—Å—è, –Ω–µ –∏–¥—ë—Ç –≤ –∫—Ä–æ–≤–∞—Ç—å. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≥–æ–≤–æ—Ä–∏—Ç: ¬´–Ø –ø–µ—Ä–µ—É—Ç–æ–º–ª—ë–Ω. –ú–Ω–µ —Å–ª–æ–∂–Ω–æ —É—Å–ø–æ–∫–æ–∏—Ç—å—Å—è¬ª. –≠—Ç–æ –Ω–µ –∫–∞–ø—Ä–∏–∑, –∞ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã",
            "–°—Å–æ—Ä—ã —Å –±—Ä–∞—Ç–æ–º –∏–ª–∏ —Å–µ—Å—Ç—Ä–æ–π. –ü—Ä–æ–≤–æ—Ü–∏—Ä—É–µ—Ç, –¥—Ä–∞–∑–Ω–∏—Ç, —Å–ø–æ—Ä–∏—Ç ¬´–±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã¬ª. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ: ¬´–ú–Ω–µ –±–æ–ª—å–Ω–æ. –Ø –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –æ–± —ç—Ç–æ–º —Å–∫–∞–∑–∞—Ç—å¬ª. –ê–≥—Ä–µ—Å—Å–∏—è —á–∞—Å—Ç–æ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞.",
            "–ò–∑–±–µ–≥–∞–π —Å—Ç—ë–±–∞ –∏ –æ–±–µ—Å—Ü–µ–Ω–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º ('—Ñ–∏–≥–Ω—è, —Å –¥—Ä—É–∑—å—è–º–∏ –ø–æ—Å—Å–æ—Ä–∏–ª—Å—è').",
            "–°–ª—É—à–∞–π –∞–∫—Ç–∏–≤–Ω–æ, –æ–±—Å—É–∂–¥–∞–π –ø–æ –¥—É—à–∞–º, –æ—Å–æ–±–µ–Ω–Ω–æ –æ —á—É–≤—Å—Ç–≤–∞—Ö –∏ –≤—ã–∑–æ–≤–∞—Ö ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–æ.",
            "–ù–µ —á–∏—Ç–∞–π –º–æ—Ä–∞–ª–∏ –∏ –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π –º–Ω–µ–Ω–∏—è ‚Äî —Ä–∞–∑–±–∏—Ä–∞–π —Å–∏—Ç—É–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–µ.",
            "–û—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–µ. –ù–µ —Ö–æ—á–µ—Ç —á–∏—Å—Ç–∏—Ç—å –∑—É–±—ã, –æ–¥–µ–≤–∞—Ç—å—Å—è, —É–±–∏—Ä–∞—Ç—å. –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: ¬´–Ø –≤—ã–º–æ—Ç–∞–Ω. –£ –º–µ–Ω—è –Ω–µ—Ç —Ä–µ—Å—É—Ä—Å–∞ –Ω–∏ –Ω–∞ —á—Ç–æ¬ª. –î–µ—Ç—è–º —Ç–æ–∂–µ –Ω—É–∂–Ω–∞ –ø–∞—É–∑–∞ ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ –≤–∑—Ä–æ—Å–ª—ã–º.",
            "–ì–æ–≤–æ—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ –æ —Ç–µ–ª–µ, –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∏ —Å–µ–∫—Å–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å—Ç—ã–¥–∞.",
            "–î–∞–π –±–æ–ª—å—à–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (–±—é–¥–∂–µ—Ç, –≤—ã–±–æ—Ä —Ö–æ–±–±–∏), –Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π —á—ë—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞.",
            "–•–≤–∞–ª–∏ –∑–∞ —É—Å–∏–ª–∏—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.",
            "–ù–µ —Å—Ä–∞–≤–Ω–∏–≤–∞–π —Å –¥—Ä—É–≥–∏–º–∏ ‚Äî —ç—Ç–æ —Ä–∞–∑—Ä—É—à–∞–µ—Ç —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É.",
            "–í–µ–¥—ë—Ç —Å–µ–±—è '–ø–æ-–¥–µ—Ç—Å–∫–∏'. –ü—Ä–æ—Å–∏—Ç—Å—è –Ω–∞ —Ä—É–∫–∏, –≥–æ–≤–æ—Ä–∏—Ç –∫–∞–∫ –º–∞–ª—ã—à, —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ: ¬´–ú–Ω–µ –Ω—É–∂–Ω–æ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏¬ª. –†–µ–≥—Ä–µ—Å—Å–∏—è ‚Äî —ç—Ç–æ –Ω–µ —à–∞–≥ –Ω–∞–∑–∞–¥, –∞ —Å–ø–æ—Å–æ–± —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º.",
            "–ò–Ω—Ç–µ—Ä–µ—Å—É–π—Å—è –∏–≥—Ä–∞–º–∏, —Å–ø–æ—Ä—Ç–æ–º, –≥–∞–¥–∂–µ—Ç–∞–º–∏ ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π –º–Ω–µ–Ω–∏–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π —Ä–µ—Å—É—Ä—Å—ã.",
            "–°–ª–µ–¥–∏ –∑–∞ –∫–æ–º–ø–∞–Ω–∏–µ–π, –Ω–æ –¥–∞–π –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ ‚Äî –¥—Ä—É–∑—å—è –¥–ª—è –Ω–µ–≥–æ –∫–∞–∫ –≤—Ç–æ—Ä–∞—è —Å–µ–º—å—è.",
            "–û–±—Å—É–∂–¥–∞–π —Ä–∏—Å–∫–∏ (–∫—É—Ä–µ–Ω–∏–µ, –∞–ª–∫–æ–≥–æ–ª—å) –æ—Ç–∫—Ä—ã—Ç–æ –∏ –ø–æ–æ—â—Ä—è–π –∑–¥–æ—Ä–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è.",
            "–ü–æ–æ—â—Ä—è–π —Å–ø–æ—Ä—Ç –∏ –¥–≤–∏–∂–µ–Ω–∏–µ ‚Äî –≤ 13 –ª–µ—Ç —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å —ç–Ω–µ—Ä–≥–∏–µ–π –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é.",
            "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç '–º–Ω–µ —Å–∫—É—á–Ω–æ'. –ñ–∞–ª—É–µ—Ç—Å—è, —Ö–æ–¥–∏—Ç –∑–∞ –≤–∞–º–∏, —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ. –ò—Å—Ç–∏–Ω–Ω—ã–π —Å–º—ã—Å–ª: ¬´–ú–Ω–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Å–≤—è–∑–∏. –û–±–Ω–∏–º–∏ –º–µ–Ω—è¬ª. –ò–º —Å–∫—É—á–Ω–æ –Ω–µ –æ—Ç –±–µ–∑–¥–µ–ª—å—è, –∞ –æ—Ç –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞.",
            "–®—É—Ç–∏—Ç–µ –≤–º–µ—Å—Ç–µ, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–µ–º–µ–π–Ω—ã–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏ ‚Äî —ç—Ç–æ —É–∫—Ä–µ–ø–ª—è–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è.",
            "–ò–Ω—Ç–µ—Ä–µ—Å—É–π—Å—è –µ–≥–æ —Ü–µ–ª—è–º–∏ –∏ –º–µ—á—Ç–∞–º–∏ ‚Äî –ø–æ–º–æ–≥–∞–π –≤–∏–¥–µ—Ç—å –ø—É—Ç—å –∫ –Ω–∏–º.",
            "–ü—Ä–∏–∑–Ω–∞–≤–∞–π –µ–≥–æ —Ä–∞—Å—Ç—É—â—É—é –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –Ω–æ –±—É–¥—å —è—Å–µ–Ω —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏.",
            "–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π '–≤—Å–µ —Ä–æ–≤–µ—Å–Ω–∏–∫–∏ —ç—Ç–æ –¥–µ–ª–∞—é—Ç' –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –ø—Ä–æ—Ç–∏–≤ ‚Äî —Å–ª—É—à–∞–π –µ–≥–æ –ª–æ–≥–∏–∫—É.",
            "–ü–æ–º–æ–≥–∞–π —É–ø—Ä–∞–≤–ª—è—Ç—å –≥–Ω–µ–≤–æ–º –∏ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ–º ‚Äî —É—á–∏ –∑–¥–æ—Ä–æ–≤—ã–º –≤—ã—Ö–æ–¥–∞–º (—Å–ø–æ—Ä—Ç, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ).",
            "–ì–æ–≤–æ—Ä–∏ –æ –¥–∞–≤–ª–µ–Ω–∏–∏ —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤, –±—É–ª–ª–∏–Ω–≥–µ, –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–µ ‚Äî —Å–æ–∑–¥–∞–≤–∞–π –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.",
            "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π –µ–≥–æ –ª–∏—á–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å ‚Äî –Ω–æ –∑–Ω–∞–π –æ—Å–Ω–æ–≤–Ω–æ–µ.",
            "–£—á–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º—É –º—ã—à–ª–µ–Ω–∏—é ‚Äî –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ –≤–µ—Ä—É, –≤–æ–ø—Ä–æ—à–∞—Ç—å '–ø–æ—á–µ–º—É'."
        ]
    
    async def send_telegram_message(self, message: str):
        """Send message to Telegram"""
        try:
            url = f"https://api.telegram.org/bot{self.telegram_token}/sendMessage"
            payload = {
                'chat_id': self.chat_id,
                'text': message,
                'parse_mode': 'HTML',
                'disable_web_page_preview': True
            }
            
            async with aiohttp.ClientSession() as session:
                async with session.post(url, json=payload) as response:
                    if response.status == 200:
                        print("‚úÖ Telegram message sent successfully")
                        return True
                    else:
                        error_text = await response.text()
                        print(f"‚ùå Telegram API error: {error_text}")
                        return False
        except Exception as e:
            print(f"‚ùå Failed to send Telegram message: {e}")
            return False
    
    def get_today_schedule(self):
        """Get today's schedule based on current day of week"""
        today = datetime.now()
        
        # Format date and day of week in Russian
        date_str = today.strftime("%d.%m.%Y")
        week_number = today.isocalendar()[1]
        
        try:
            day_of_week = today.strftime("%A").lower()
            day_of_week_ru = {
                'monday': '–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫',
                'tuesday': '–≤—Ç–æ—Ä–Ω–∏–∫',
                'wednesday': '—Å—Ä–µ–¥–∞', 
                'thursday': '—á–µ—Ç–≤–µ—Ä–≥',
                'friday': '–ø—è—Ç–Ω–∏—Ü–∞',
                'saturday': '—Å—É–±–±–æ—Ç–∞',
                'sunday': '–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'
            }.get(day_of_week, day_of_week)
        except:
            # Fallback if locale doesn't work
            days = ['–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–≤—Ç–æ—Ä–Ω–∏–∫', '—Å—Ä–µ–¥–∞', '—á–µ—Ç–≤–µ—Ä–≥', '–ø—è—Ç–Ω–∏—Ü–∞', '—Å—É–±–±–æ—Ç–∞', '–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ']
            day_of_week_ru = days[today.weekday()]
        
        today_activities = self.schedule.get(day_of_week_ru, [])
        
        return date_str, day_of_week_ru, today_activities, week_number
    
    def format_schedule_message(self, date_str: str, day_of_week: str, activities: list, week_number: int, spoiler_mode: bool = True):
        """Format the schedule message for Telegram"""
        # Capitalize day of week
        day_capitalized = day_of_week.capitalize()
        
        # Get current date for Russian format
        today = datetime.now()
        day_month = today.strftime("%-d %B")  # "5 –Ω–æ—è–±—Ä—è"
        
        # Get random tips
        marta_tip = random.choice(self.marta_tips)
        arkasha_tip = random.choice(self.arkasha_tips)
        
        message = f"<b>#–î–µ—Ç–∏ #–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</b>\n"
        message += f"üìÖ <b>{day_capitalized} {day_month}, –Ω–µ–¥–µ–ª—è {week_number}</b>\n\n"
        
        if activities:
            message += "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ <b>–°–µ–≥–æ–¥–Ω—è —É –¥–µ—Ç–µ–π:</b>\n\n"
            
            for i, activity in enumerate(activities, 1):
                message += f"{i}. {activity['child']}\n"
                message += f"   {activity['activity']}\n"
                message += f"   üïê {activity['time']}\n"
                
                if i < len(activities):
                    message += "\n"
        else:
            message += "üéâ <b>–°–µ–≥–æ–¥–Ω—è –≤—ã—Ö–æ–¥–Ω–æ–π! –ó–∞–Ω—è—Ç–∏–π –Ω–µ—Ç.</b>\n"
        
        message += "\n\n" + "="*40 + "\n"
        message += "üí° <b>–°–æ–≤–µ—Ç –¥–Ω—è:</b>\n\n"
        
        if spoiler_mode:
            # Spoiler mode - —Å–æ–≤–µ—Ç—ã —Å–∫—Ä—ã—Ç—ã –ø–æ–¥ —Å–ø–æ–π–ª–µ—Ä–∞–º–∏
            message += f"üëß <b>–î–ª—è –ú–∞—Ä—Ç—ã (9 –ª–µ—Ç):</b>\n"
            message += f"<tg-spoiler>{marta_tip}</tg-spoiler>\n\n"
            
            message += f"üë¶ <b>–î–ª—è –ê—Ä–∫–∞—à–∏ (13 –ª–µ—Ç):</b>\n"
            message += f"<tg-spoiler>{arkasha_tip}</tg-spoiler>\n\n"
            
            message += "üîç <i>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–≤–µ—Ç—ã</i>\n\n"
        else:
            # Normal mode - —Å–æ–≤–µ—Ç—ã –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É
            message += f"üëß <b>–î–ª—è –ú–∞—Ä—Ç—ã (9 –ª–µ—Ç):</b>\n{marta_tip}\n\n"
            message += f"üë¶ <b>–î–ª—è –ê—Ä–∫–∞—à–∏ (13 –ª–µ—Ç):</b>\n{arkasha_tip}\n\n"
        
        message += "üí´ –•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è!"
        
        return message
    
    async def send_daily_schedule(self, spoiler_mode: bool = True):
        """Send today's schedule to Telegram"""
        print("üïê Preparing daily schedule...")
        
        date_str, day_of_week, activities, week_number = self.get_today_schedule()
        
        print(f"üìÖ Today: {date_str}, {day_of_week}, week {week_number}")
        print(f"üìã Activities: {len(activities)}")
        print(f"üéØ Spoiler mode: {'ON' if spoiler_mode else 'OFF'}")
        
        message = self.format_schedule_message(date_str, day_of_week, activities, week_number, spoiler_mode)
        
        # Print to console for debugging (–±–µ–∑ —Å–ø–æ–π–ª–µ—Ä–æ–≤)
        print("\n" + "="*50)
        debug_message = message.replace('<b>', '').replace('</b>', '').replace('<tg-spoiler>', '').replace('</tg-spoiler>', '').replace('<i>', '').replace('</i>', '')
        print(debug_message)
        print("="*50)
        
        # Send to Telegram
        print("\nüì± Sending to Telegram...")
        success = await self.send_telegram_message(message)
        
        if success:
            print("‚úÖ Daily schedule sent successfully!")
        else:
            print("‚ùå Failed to send daily schedule")
        
        return success

async def main():
    """Main execution function"""
    try:
        notifier = KidsScheduleNotifier()
        
        # –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å spoiler_mode –Ω–∞ False, —á—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–ø–æ–π–ª–µ—Ä—ã
        await notifier.send_daily_schedule(spoiler_mode=True)
        
    except Exception as e:
        print(f"‚ùå Critical error: {e}")

if __name__ == "__main__":
    asyncio.run(main())
